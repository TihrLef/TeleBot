{% extends "base_generic.html" %}
{% load static %}
{% block content %}
<form method="post">
    {% csrf_token %}
    {% if available_users%}
    <tr>
        <th><label for="id_user">User:</label></th>
        <td>
            <select name="user" id="id_user" multiple>
                {% for auser in available_users%}
                <option value="{{auser.telegram_id}}" selected>{{auser.username}}</option>
                {% endfor%}
            </select>
        </td>
    </tr>
    {%endif%}
    {% if projects%}
    <tr>
        <th><label for="id_project">Project:</label></th>
        <td>
            <select name="project" id="id_project" multiple>
                {% for project in projects%}
                <option value="{{project.id}}">{{project.name}}</option>
                {%endfor%}
            </select>
        </td>
    </tr><br />
    {% endif%}
    {{form.left_date}}<br />
    {{form.right_date}}<br />
    <button type="submit">Filter</button>
</form>
{% if error_message%}
<span>{{error_message}}</span>
{% else%}
<div style="margin-left:20px;margin-top:20px">
    <div style="margin-left:20px;margin-top:20px">
        {% if reports%}
		<a href="{% static pdfname %}">Download pdf</a>
        {% endif%}
        <div class="container-fluid">
            {% if reports%}
            <ul>
                {% for report in reports %}
                <li>
                    <strong>Project_name: {{report.project}}</strong><br />
                    <strong>Week:</strong> {{report.report_date}}<br />
                    <strong>User:</strong> {{report.user}}<br />
                    <strong>Message:</strong> {{report.message}}<br /> <br />
                </li>
                {% endfor %}
            </ul>
            {% else%}
            You don't have reports
            {% endif%}
        </div>
    </div>
</div>
{% endif%}
{% endblock %}
