{% extends "base_generic.html" %}
{% load static %}
{% block content %}
<style>
.table {
	width: 100%;
	border: none;
	border-collapse: collapse; 
	margin-bottom: 20px;
}
.table thead th {
	font-weight: bold;
    
	text-align: left;
	border: none;
    color: #e4f2f2;
	padding: 10px 15px;
	background: #21145e;
	font-size: 22px;
	border-left: 0px solid #ddd;
	border-right: 0px solid #ddd;
}
.table tbody td {
	text-align: left;
	border-left: 0px solid #ddd;
	border-right: 0px solid #ddd;
	padding: 10px 15px;
	font-size: 21px;
	vertical-align: top;
    color:#000;
}
.table tbody tr:hover td{
    background: #acb7e3; /* Цвет фона при наведении */
    color:#000;
   }

.table thead tr th:first-child, .table tbody tr td:first-child {
	border-left: 0px solid #21145e;
}
.table thead tr th:last-child, .table tbody tr td:last-child {
	border-right: 0px solid #21145e;
}
.table tbody tr:nth-child(even){
	background: #f2f5fc;
}
 .table_a {
    border: 0; /* Граница вокруг таблицы */
   	width:100%;
    padding-left: 20%;
   }
   .table_a:td {
    border: 0; /* Граница вокруг ячеек */
    empty-cells: hide; /* Прячем пустые ячейки */
    padding: 5px; /* Поля в ячейках */ 
   }
*,
*::before,
*::after {
  box-sizing: border-box;
}
select {
  -webkit-appearance: none;
     -moz-appearance: none;
          appearance: none;
  background-color: transparent;
  border: none;
  padding: 0 1em 0 0;
  margin: 0;
  width: 100%;
  font-family: inherit;
  font-size: inherit;
  cursor: inherit;
  line-height: inherit;

  outline: none;
  position:relative;
}
select::-ms-expand {
  display: none;
}

.select {
  display: grid;
  grid-template-areas: "select";
  align-items: center;
  position: relative;
  min-width: 15ch;
  max-width: 30ch;
  border: 1px solid #000;
  border-radius: 0.25em;
  padding: 0.25em 0.5em;
  font-size: 1.25rem;
  cursor: pointer;
  line-height: 1.1;
  background-color: #fff;
  background-image: linear-gradient(to top, #f9f9f9, #fff 33%);
}
.select select, .select::after {
  grid-area: select;
}
.select:not(.select--multiple)::after {
  content: "";
  justify-self: end;
  width: 0.8em;
  height: 0.5em;
  background-color: var(--select-arrow);
  -webkit-clip-path: polygon(100% 0%, 0 0%, 50% 100%);
          clip-path: polygon(100% 0%, 0 0%, 50% 100%);
}

select:focus + .focus {
  position: absolute;
  top: -1px;
  left: -1px;
  right: -1px;
  bottom: -1px;
  border: 2px solid var(--select-focus);
  border-radius: inherit;
}

select[multiple] {
  padding-right: 0;
  height: 6rem;
}
select[multiple] option {
  white-space: normal;
  outline-color: var(--select-focus);
}



label {
  font-size: 1.125rem;
  font-weight: 500;
}

.select + label {
  margin-top: 2rem;
}
.button {
  border:0;
  background: #21145e;
  color: #dfdeee;
  border-radius: 50px;
  width: 200px;
  height: 49px;
  font-size: 16px;
  font-family:Arial;
  position: relative;
  text-align:center;
  display: inline-block;
  padding-top:auto;
  margin: 0 auto;
  padding: 1rem 1.5rem; /* Поля вокруг текста */
  text-decoration: none; /* Убираем подчёркивание */
  transition: 0.3s;
  cursor: pointer;
}

.button:hover {
    opacity: 0.8;
}

</style>
<h2 align="center">Отчеты</h2>
<form method="post">
    {% csrf_token %}
    {% if available_users%}
    <table class="table_a">
    <tr>
    <th><label>Дата начала: </label></th>
    	<td>{{form.left_date}}<br /></td>
        <th><label for="id_user">Пользователь:</label></th>
        <td>
        <div class="select select--multiple">
            <select name="user" id="id_user" multiple>
                {% for auser in available_users%}
                <option value="{{auser.telegram_id}}">{{auser.username}}</option>
                {% endfor%}
            </select>
         </div>
        </td>
    </tr>
    
    {%endif%}
    {% if projects%}
    <tr>
    <th><label>Дата конца: </label></th>
    <td>{{form.right_date}}<br /></td>
        <th><label for="id_project">Проект:</label></th>
        <td>
        <div class="select select--multiple">
            <select name="project" id="id_project" multiple>
                {% for project in projects%}
                <option value="{{project.id}}">{{project.name}}</option>
                {%endfor%}
            </select>
          </div>
        </td>
    </tr><br />
    {% endif%}
    
    </table>
    
    
<p align = right><button type="submit" class="button">Фильтрация</button></p>
</form>

{% if error_message%}
<span>{{error_message}}</span>
{% else%}

        {% if reports%}
		<p align = right><a href="{% static pdfname %}" class="button">Загрузить pdf</a></p>
	
        {% endif%}
        
            {% if reports%}
		
            <table align = center width = 85%  id="myTable" class="table">
    		<thead>
				<tr>
				<th width = 15% onclick="sortTable(0)"  align=left>Название проекта</th>
				<th width = 10% onclick="sortTable(1)"  align=left>Дата</th>
				<th width = 15% onclick="sortTable(2)">Пользователь</th>
				<th width = 30% onclick="sortTable(3)">Отчет</th>
				</tr> 
    		</thead>
    		<tbody>
      		{% for report in reports %}
      		<tr>
				<td>				{{report.project}}</td>
				<td align=center>	{{report.report_date|date:'d-m-Y'}}</td> 
				<td align=center>	{{report.user}}</td>
				<td align=center>   {{report.message}}</td>
      		</tr>
      		{% endfor %}
      		</tbody>
			</table>
            {% else%}
            Нет отчетов.
            {% endif%}
     
    
{% endif%}
{% endblock %}




